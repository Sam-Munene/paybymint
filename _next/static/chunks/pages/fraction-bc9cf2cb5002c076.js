(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{8335:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fraction",function(){return s(42260)}])},93459:function(e,t,s){"use strict";s.d(t,{sD:function(){return r}});var n=s(70148),r=(s(40993),function(e){n.Am.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})})},42260:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var n,r=s(47568),a=s(14924),i=s(10092),c=s(85893),o=s(11163),l=s(67294),d=s(25617),u=s(98690),m=s.n(u),x=s(41664),p=s.n(x),h=s(14517),f=s(43135),g=s(24456),j=s(64146),v=s(70794),y=s(70148),b=s(86455),N=s.n(b),w=s(77630),S=s.n(w),C=s(8592),Z=s(93459),k=s(14344),_=s.n(k),P=s(9669),E=s.n(P),B=s(31607),F=(s(95291),s(36823)),D=new(m().SES)(F),T=S()(N());function A(){var e=(0,l.useState)(!1),t=e[0],s=e[1],a=((0,l.useRef)(),(0,d.v9)((function(e){return e.user.address}))),u=(0,d.v9)((function(e){return e.user.blockchain})),m=(0,d.v9)((function(e){return e.user.provider})),x=(0,l.useState)(0),p=x[0],h=x[1],b=(0,l.useState)("0"),N=b[0],w=b[1],S=(0,l.useState)(1),k=S[0],_=S[1],P=(0,l.useState)(0),B=P[0],F=P[1],A=(0,l.useState)({}),M=A[0],O=A[1],H=(0,l.useState)(""),R=H[0],U=H[1],z=(0,l.useState)(""),K=z[0],V=z[1],X=(0,l.useState)(""),q=X[0],J=X[1],Y=(0,l.useState)(""),G=Y[0],Q=Y[1],W=(0,l.useState)(""),$=W[0],ee=W[1],te=(0,l.useState)(""),se=te[0],ne=te[1],re=(0,l.useState)(!1),ae=re[0],ie=re[1],ce=(0,l.useState)(0),oe=ce[0],le=ce[1],de=(0,l.useState)(0),ue=de[0],me=de[1],xe=(0,l.useState)(0),pe=xe[0],he=xe[1],fe=(0,l.useState)(""),ge=fe[0],je=fe[1],ve=(0,o.useRouter)(),ye=(0,o.useRouter)().query.tokenId;(0,l.useEffect)((function(){console.log("test bignum:",(0,v.Z)(1.5).toString());var e=function(){var e=(0,r.Z)((function(){var e,t,s,r,c,o,l,d,x,p,y,b;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(ie(!0),null===m)return[3,12];e=m.getSigner(),"Ethereum"===u?n=f.xC.tokenContractAddr:"Binance"===u&&(n=f.t4.tokenContractAddr),t=new j.CH(n,g.Z,e),O(t),i.label=1;case 1:return i.trys.push([1,11,,12]),[4,t.uri(ye)];case 2:return s=i.sent(),U(s),[4,t.balanceOf(a,ye)];case 3:return r=i.sent(),le(r.toNumber()),[4,m.getBalance(a)];case 4:return c=i.sent(),je(c.toString()),[4,E().get(s)];case 5:return o=i.sent().data,[4,t.creator(ye)];case 6:return l=i.sent(),Q(l),V(o.image),J(o.name),ee(o.description),o.email&&ne(o.email),[4,t.fractionPrice(ye)];case 7:return d=i.sent(),w(d.toString()),he((0,v.Z)(d.toString()).div((0,v.Z)("1000000000000000000")).toNumber()),[4,t.totalSupply(ye)];case 8:return x=i.sent(),F(x.toNumber()),[4,t.maxSupply(ye)];case 9:return p=i.sent(),h(p.toNumber()),[4,E().get("https://api.coingecko.com/api/v3/simple/price?ids=matic-network&vs_currencies=usd")];case 10:return y=i.sent().data,me(y["matic-network"].usd),[3,12];case 11:return b=i.sent(),console.log("error",b),[3,12];case 12:return ie(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}),[a,ye,m]);var be=function(){var e=(0,r.Z)((function(e){var t,s;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:t={Destination:{CcAddresses:[se],ToAddresses:[se]},Message:{Body:{Html:{Charset:"UTF-8",Data:"<div>".concat(a," has successfully minted ").concat(k," ").concat(q," on transaction ").concat(e,"</div>")},Text:{Charset:"UTF-8",Data:"".concat(a," has successfully minted ").concat(k," ").concat(q," on transaction ").concat(e)}},Subject:{Charset:"UTF-8",Data:"Poulina Marketplace"}},Source:"omuniverse823@gmail.com",ReplyToAddresses:["omuniverse823@gmail.com"]},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,D.sendEmail(t).promise()];case 2:return n.sent(),[3,4];case 3:return s=n.sent(),console.log("error:",s),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:if(k>p-B)return[2,(0,Z.sD)("Fraction count exceed!")];if(0===k)return[2,(0,Z.sD)("Mint more than 1 token")];y.Am.dismiss(),r.label=1;case 1:return r.trys.push([1,5,,6]),(e=(0,v.Z)(k).multipliedBy((0,v.Z)(N))).gt((0,v.Z)(ge))?[2,(0,Z.sD)("Insufficient fund")]:(ie(!0),[4,M.mint(ye,k,{value:e.toString()})]);case 2:return[4,r.sent().wait()];case 3:return t=r.sent(),[4,be(t.transactionHash)];case 4:return r.sent(),T.fire({title:(0,c.jsx)(C.Z,{component:"h2",children:"Congratulation!"}),html:(0,c.jsx)(C.Z,{component:"p",children:"You got the fractions."}),icon:"success"}),s(!1),ve.push("/list-item?tokenId="+ye),[3,6];case 5:return n=r.sent(),console.log("error",n),[3,6];case 6:return ie(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("section",{className:"w-11/12 max-w-6xl mx-auto my-7",children:[(0,c.jsx)(I,{tokenId:ye,name:q,tokenUrl:R,image:K,description:$,loading:ae,vfpEth:N,fraction:p,totalFraction:oe,creator:G,walletAddress:a,onPay:function(){return s(!0)}}),(0,c.jsx)(y.Ix,{style:{fontSize:12,padding:"5px !important",lineHeight:"15px"}}),t&&(0,c.jsx)(L,{setShow:s,vfpEth:N,frcCount:k,setFrcCount:_,loading:ae,mint:Ne,maxFraction:p-oe,polygonPrice:ue,totalPrice:pe,setTotalPrice:he})]})}var I=function(e){var t=e.tokenId,s=e.name,n=void 0===s?"Directions Real Estate Currency":s,r=e.description,i=(e.creator,e.walletAddress,e.image),o=e.loading,d=e.vfpEth,u=e.totalFraction,m=e.onPay;return(0,c.jsxs)(l.Fragment,{children:[(0,c.jsxs)("div",{className:"flex flex-col items-center md:flex-row md:items-stretch gap-4",children:[(0,c.jsx)("img",{src:""!==i?i:"",alt:"nft",className:"w-[350px] h-[350px] border shadow-2xl rounded-md"}),(0,c.jsxs)("div",{className:"relative border shadow-2xl rounded-md p-6 flex-1 flex flex-col justify-between",children:[(0,c.jsxs)("button",{className:"flex items-center absolute top-2 right-4 text-rolling-stone text-sm",children:[(0,c.jsx)(h.Z,{width:"20",type:"share",className:"mr-1"}),(0,c.jsx)("span",{children:"Share"})]}),(0,c.jsx)("h2",{className:"font-bold text-xl",children:n}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:"text-trout text-sm text-opacity-50 font-medium",children:["Description : "," "]}),(0,c.jsx)("span",{className:"text-trout text-sm font-medium",children:r})]}),(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsxs)("div",{className:"p-4 pl-0 pr-6",children:[(0,c.jsx)("p",{className:"text-trout text-opacity-50 text-sm font-medium",children:"Current Value"}),(0,c.jsxs)("p",{className:"flex items-center",children:[(0,c.jsx)("span",{children:(0,c.jsx)(h.Z,{type:"ether"})}),(0,c.jsxs)("span",{className:"ml-1",children:[(0,c.jsx)("span",{className:"font-bold",children:(0,v.Z)(d).multipliedBy((0,v.Z)(u)).dividedBy((0,v.Z)("1000000000000000000")).toString()})," "]})]})]}),(0,c.jsxs)("div",{className:"p-4 pr-6 ",children:[(0,c.jsx)("p",{className:"text-trout text-opacity-50 text-sm border-l border-l-light-orange pl-3 font-medium",children:"Value per fraction"}),(0,c.jsxs)("p",{className:"flex items-center border-l border-l-light-orange pl-3",children:[(0,c.jsx)("span",{children:(0,c.jsx)(h.Z,{type:"ether"})}),(0,c.jsxs)("span",{className:"ml-1",children:[(0,c.jsx)("span",{className:"font-bold",children:(0,v.Z)(d).dividedBy((0,v.Z)("1000000000000000000")).toString()})," "]})]})]}),(0,c.jsxs)("div",{className:"p-4 pr-6 ",children:[(0,c.jsx)("p",{className:"text-trout text-opacity-50 text-sm border-l border-l-light-orange pl-3 font-medium",children:"Fraction"}),(0,c.jsxs)("p",{className:"flex items-center border-l border-l-light-orange pl-3",children:[(0,c.jsx)("span",{children:(0,c.jsx)(h.Z,{type:"ether"})}),(0,c.jsxs)("span",{className:"ml-1",children:[(0,c.jsx)("span",{className:"font-bold",children:u})," "]})]})]})]}),(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("button",{onClick:m,className:"bg-vermilion rounded-3xl py-2 px-7 text-white font-bold",children:"Pay by Mint"}),(0,c.jsx)(p(),{href:"/list-item?tokenId=".concat(t),children:(0,c.jsx)("a",{className:"bg-vermilion rounded-3xl py-2 px-7 text-white font-bold ml-2",children:"List for Sale"})})]})]})]}),o&&(0,c.jsx)("div",{style:(0,a.Z)({position:"fixed",top:"0px",left:"0px",zIndex:"10000000000 !important",width:"100%",height:"100%",backgroundColor:"#ffffff",opacity:"0.5"},"zIndex","10000"),children:(0,c.jsx)(B.Z,{type:"Puff",height:100,width:100,style:{position:"fixed",top:"calc(50% - 50px)",left:"calc(50% - 50px)"}})})]})},L=function(e){var t=e.setShow,s=e.vfpEth,n=e.frcCount,r=e.maxFraction,a=e.setFrcCount,i=e.loading,o=e.polygonPrice,l=e.totalPrice,d=e.setTotalPrice,u=e.mint;return(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-80 w-screen h-screen overflow-hidden",children:(0,c.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg overflow-hidden text-center p-4 relative",children:[(0,c.jsx)("button",{onClick:function(){return t(!1)},className:"absolute top-2 right-2",children:(0,c.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("circle",{cx:"16",cy:"16",r:"16",fill:"#C4C4C4"}),(0,c.jsx)("path",{d:"M16.8546 16.0001L20.9464 11.9084C21.1819 11.6729 21.1819 11.2922 20.9464 11.0567C20.7108 10.8212 20.3302 10.8212 20.0946 11.0567L16.0029 15.1484L11.9112 11.0567C11.6756 10.8212 11.295 10.8212 11.0595 11.0567C10.8239 11.2922 10.8239 11.6729 11.0595 11.9084L15.1512 16.0001L11.0595 20.0918C10.8239 20.3274 10.8239 20.708 11.0595 20.9436C11.1769 21.061 11.3311 21.12 11.4853 21.12C11.6395 21.12 11.7937 21.061 11.9112 20.9436L16.0029 16.8518L20.0946 20.9436C20.2121 21.061 20.3663 21.12 20.5205 21.12C20.6747 21.12 20.8289 21.061 20.9463 20.9436C21.1819 20.708 21.1819 20.3274 20.9463 20.0918L16.8546 16.0001Z",fill:"white"})]})}),(0,c.jsx)("h4",{className:"text-cape-cod font-medium mb-4",children:"Total Bill"}),(0,c.jsx)("div",{className:"bg-vermilion bg-opacity-20 rounded-[50%] p-4 w-28 mx-auto flex justify-center items-center",children:(0,c.jsx)("img",{width:"60",src:"/assets/dollar.svg",alt:"dollar"})}),(0,c.jsx)("p",{className:"text-shuttle-gray mt-5",children:"Amount"}),(0,c.jsxs)("p",{className:"flex items-center justify-center mt-1",children:[(0,c.jsx)("span",{children:(0,c.jsx)(h.Z,{type:"ether"})}),(0,c.jsxs)("span",{className:"ml-1",children:[(0,c.jsx)("span",{className:"font-bold",children:(0,v.Z)(n).multipliedBy((0,v.Z)(s)).dividedBy((0,v.Z)("1000000000000000000")).toString()})," "]})]}),(0,c.jsx)("p",{className:"mt-1",children:(0,c.jsxs)("span",{className:"ml-1",children:[(0,c.jsxs)("span",{className:"font-bold",children:[n," Fraction"]})," "]})}),(0,c.jsx)("p",{className:"flex items-center justify-center border-b border-b-gray-300",children:(0,c.jsx)("span",{className:"ml-1",children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginTop:"5px",marginBottom:"15px"},children:[(0,c.jsx)("input",{type:"number",className:"form-control",style:{width:"100px"},max:r*o,onChange:function(e){d(e.target.value),a(Math.floor((0,v.Z)(e.target.value).div((0,v.Z)(o)).times((0,v.Z)("1000000000000000000")).div(s).toNumber()))},value:l})," USD"]})})}),(0,c.jsx)("button",{className:"bg-orange text-white mx-auto px-6 py-2 rounded-md mt-5",onClick:function(){return u()},children:i?(0,c.jsx)(_(),{size:"34px",width:"4px"}):"Mint Now"})]})})}},28022:function(){},36823:function(e){"use strict";e.exports=JSON.parse('{"accessKeyId":"","secretAccessKey":"","region":"us-east-1"}')}},function(e){e.O(0,[586,166,669,794,293,571,774,888,179],(function(){return t=8335,e(e.s=t);var t}));var t=e.O();_N_E=t}]);